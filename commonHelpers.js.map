{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\nlet intervalID;\n\nconst elemetsRefs = {\n  btnStartRef: document.querySelector('button[data-start]'),\n  dataInputRef: document.querySelector('input#datetime-picker'),\n  dataDaysRef: document.querySelector('.value[data-days]'),\n  dataHoursRef: document.querySelector('.value[data-hours]'),\n  dataMinutesRef: document.querySelector('.value[data-minutes]'),\n  dataSecondsRef: document.querySelector('.value[data-seconds]'),\n\n};\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      elemetsRefs.btnStartRef.disabled = userSelectedDate < Date.now();\n      if (elemetsRefs.btnStartRef.disabled) {\n        iziToast.error({\n          message: 'Please choose a date in the future',\n          messageColor: 'white',\n          backgroundColor: 'red',\n          position: 'topRight',\n          close: false,\n        });\n      }\n    },\n  };\n\n  flatpickr('#datetime-picker', options);\n\nelemetsRefs.btnStartRef.disabled = true;\n\nelemetsRefs.btnStartRef.addEventListener('click', () => {\n  elemetsRefs.btnStartRef.disabled = true;\n  elemetsRefs.dataInputRef.disabled = true;\n\n  intervalID = setInterval(timerUpdate, 1000);\n});\n\n\nfunction timerUpdate() {\n    if (userSelectedDate - Date.now() <= 0) {\n      clearInterval(intervalID);\n      elemetsRefs.dataInputRef.disabled = false;\n      return;\n    }\n  \n    const { days, hours, minutes, seconds } = convertMs(\n      userSelectedDate - Date.now()\n    );\n  \n    elemetsRefs.dataDaysRef.textContent = addLeadingZero(days);\n    elemetsRefs.dataHoursRef.textContent = addLeadingZero(hours);\n    elemetsRefs.dataMinutesRef.textContent = addLeadingZero(minutes);\n    elemetsRefs.dataSecondsRef.textContent = addLeadingZero(seconds);\n  }\n  \n  function addLeadingZero(value) {\n    value += '';\n    return value.padStart(2, '0');\n  }\n  \n  function convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }"],"names":["userSelectedDate","intervalID","elemetsRefs","options","selectedDates","iziToast","flatpickr","timerUpdate","days","hours","minutes","seconds","convertMs","addLeadingZero","value","ms"],"mappings":"sGAMA,IAAIA,EACAC,EAEJ,MAAMC,EAAc,CAClB,YAAa,SAAS,cAAc,oBAAoB,EACxD,aAAc,SAAS,cAAc,uBAAuB,EAC5D,YAAa,SAAS,cAAc,mBAAmB,EACvD,aAAc,SAAS,cAAc,oBAAoB,EACzD,eAAgB,SAAS,cAAc,sBAAsB,EAC7D,eAAgB,SAAS,cAAc,sBAAsB,CAE/D,EAEMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBJ,EAAmBI,EAAc,CAAC,EAClCF,EAAY,YAAY,SAAWF,EAAmB,KAAK,IAAG,EAC1DE,EAAY,YAAY,UAC1BG,EAAS,MAAM,CACb,QAAS,qCACT,aAAc,QACd,gBAAiB,MACjB,SAAU,WACV,MAAO,EACjB,CAAS,CAEJ,CACL,EAEEC,EAAU,mBAAoBH,CAAO,EAEvCD,EAAY,YAAY,SAAW,GAEnCA,EAAY,YAAY,iBAAiB,QAAS,IAAM,CACtDA,EAAY,YAAY,SAAW,GACnCA,EAAY,aAAa,SAAW,GAEpCD,EAAa,YAAYM,EAAa,GAAI,CAC5C,CAAC,EAGD,SAASA,GAAc,CACnB,GAAIP,EAAmB,KAAK,IAAG,GAAM,EAAG,CACtC,cAAcC,CAAU,EACxBC,EAAY,aAAa,SAAW,GACpC,MACD,CAED,KAAM,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EACxCZ,EAAmB,KAAK,IAAK,CACnC,EAEIE,EAAY,YAAY,YAAcW,EAAeL,CAAI,EACzDN,EAAY,aAAa,YAAcW,EAAeJ,CAAK,EAC3DP,EAAY,eAAe,YAAcW,EAAeH,CAAO,EAC/DR,EAAY,eAAe,YAAcW,EAAeF,CAAO,CAChE,CAED,SAASE,EAAeC,EAAO,CAC7B,OAAAA,GAAS,GACFA,EAAM,SAAS,EAAG,GAAG,CAC7B,CAED,SAASF,EAAUG,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}